/******************************************************
*                                                     *
*   Simple Overlay - jQuery Plugin                    *
*                                                     *
*   Purpose: This project contains a simple and full  *
*            configurable jQuery plugin that loads    *
*            a cookie-controlled overlay on a page    *
*            which can also only be shown once        *
*            within a specific period. The loading    *
*            of the overlay can be triggered          *
*            automatically or by specific events.     *
*                                                     *
*   Author: Andreas Kar (thex) <andreas.kar@gmx.at>   *
*   Repository: https://git.io/JvpkM                  *
*                                                     *
******************************************************/

!function(o){var i;o.fn.simpleOverlay=function(e){(i=o.extend(!0,{},o.fn.simpleOverlay.defaults,e)).container=this,i.attachContainer(),i.initializeOpen(),i.triggerClose(),i.triggerCookieOpen(),i.triggerAlwaysOpen(),i.triggerCustom()},o.fn.simpleOverlay.defaults={attach:!0,openOnInit:!0,checkOnInit:!0,closeOnEsc:!0,background:"",style:"black",containerId:"simple-overlay",contentContainerClass:"simple-container",hideClass:"simple-hide",content:"",revision:0,clickEvents:{open:[],alwaysOpen:[],close:[]},cookie:{name:"simple-overlay",expiry:30},attachContainer:function(){i.beforeAttachContainer.call(i),i.attach&&o(i.container).each(function(){var e,n,t;e=o("<div>").attr("id",i.containerId).addClass(i.hideClass).addClass(i.containerId),i.style.startsWith("w")&&e.addClass("overlay-white"),n=o("<div>").addClass(i.contentContainerClass).html(i.content),t=o('<button type="button" class="close" aria-label="Close"><span aria-hidden="true">Ã—</span>'),e.append(n),e.append(t),o(this).prepend(e)}),i.afterAttachContainer.call(i)},initializeOpen:function(){i.openOnInit&&(i.checkOnInit?i.openOverlayCheck():i.openOverlay())},openOverlay:function(){var e=o("#"+i.containerId),n=0,t="";i.beforeOverlayOpen.call(i),i.style.startsWith("w")&&(n=255),""!=i.background&&(e.addClass("background-image"),t="background-image: linear-gradient(rgba("+n+", "+n+", "+n+",.6),rgba("+n+","+n+","+n+",.6)),url("+i.background+");"),e.removeClass(i.hideClass),e.attr("style",t),i.afterOverlayOpen.call(i)},openOverlayCheck:function(){i.checkCookie(i.getCookie())&&i.openOverlay()},closeOverlay:function(){i.beforeOverlayClose.call(i),o("#"+i.containerId).addClass(i.hideClass),i.checkCookie(i.getCookie())&&i.setCookie(),i.afterOverlayClose.call(i)},checkCookie:function(e){return""==e||"true"==e&&0<i.revision||parseInt(e)<i.revision},setCookie:function(){var e,n=new Date;i.beforeSetCookie.call(i),n.setTime(n.getTime()+24*i.cookie.expiry*60*60*1e3),e="expires="+n.toUTCString(),document.cookie=i.cookie.name+"="+i.revision+";"+e+";path=/",i.afterSetCookie.call(i)},getCookie:function(){var e=i.cookie.name+"=",n=document.cookie.split(";");i.beforeGetCookie.call(i);for(var t=0;t<n.length;t++){for(var o=n[t];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(e))return i.afterGetCookie.call(i),o.substring(e.length,o.length)}return i.afterGetCookie.call(i),""},triggerOpen:function(e){var n=e?i.clickEvents.alwaysOpen.join(","):i.clickEvents.open.join(",");""!=n&&o(n).click(function(){e?i.openOverlay():i.openOverlayCheck()})},triggerCookieOpen:function(){i.triggerOpen(!1)},triggerAlwaysOpen:function(){i.triggerOpen(!0)},triggerClose:function(){var e="#"+i.containerId;0<i.clickEvents.close.length&&(e+=","+i.clickEvents.close.join(",")),o(e).click(function(){i.closeOverlay()}),i.closeOnEsc&&o(document).on("keydown",function(e){"Escape"==e.key&&i.closeOverlay()})},triggerCustom:function(){},beforeAttachContainer:function(){},beforeOverlayOpen:function(){},beforeOverlayClose:function(){},beforeSetCookie:function(){},beforeGetCookie:function(){},afterAttachContainer:function(){},afterOverlayOpen:function(){},afterOverlayClose:function(){},afterSetCookie:function(){},afterGetCookie:function(){}}}(jQuery);